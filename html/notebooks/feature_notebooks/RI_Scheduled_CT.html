<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Scheduled Continuous Testing &mdash; Robust Intelligence  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/tabs.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/nbsphinx-code-cells.css" />
      <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.13.1/sb-1.4.0/datatables.min.css" />
      <link rel="stylesheet" type="text/css" href="../../_static/custom.css" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script>window.MathJax = {"tex": {"inlineMath": [["$", "$"], ["\\(", "\\)"]], "processEscapes": true}, "options": {"ignoreHtmlClass": "tex2jax_ignore|mathjax_ignore|document", "processHtmlClass": "tex2jax_process|mathjax_process|math|output_area"}}</script>
        <script defer="defer" src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
        <script src="../../_static/main.js"></script>
        <script src="https://cdn.datatables.net/v/dt/dt-1.13.1/sb-1.4.0/datatables.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Continuous Testing Feedback and Observability" href="../../testing_and_monitoring/monitoring_models/ct_feedback_and_observability.html" />
    <link rel="prev" title="Monitor Models with Continuous Tests" href="../../testing_and_monitoring/monitoring_models.html" />
<link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">
<div class="ge_header no-print">
    <a id="header-logo" href="../../index.html">
        <img src="../../_static/images/header-logo.png" alt="logo" />
    </a>
</div>


  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Robust Intelligence
          </a>
              <div class="version">
                2.5.2-rc.0
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_home/robust_intelligence_intro.html">What is Robust Intelligence?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_home/get_started.html">Get Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testing and Monitoring</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/creating_projects.html">Creating Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/preparing_your_models_and_datasets.html">Preparing Your Models and Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/validating_models.html">Validate Models with Stress Tests</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../testing_and_monitoring/monitoring_models.html">Monitor Models with Continuous Tests</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../../testing_and_monitoring/monitoring_models/creating_new_continuous_test.html">Creating a new Continuous Test</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Scheduled Continuous Testing</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing_and_monitoring/monitoring_models/ct_feedback_and_observability.html">Continuous Testing Feedback and Observability</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../testing_and_monitoring/monitoring_models/monitors/monitors.html">Model Monitors</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/configuring_test_runs.html">Configuring your Test Runs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/querying_results.html">Querying Test Run Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/notifications_and_alerts.html">Notifications and Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/model_governance.html">Managing Model Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/integrating_mlops.html">Integrating with MLOps</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Administration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../administration/organization_administration.html">Organization Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/workspace_configuration.html">Workspace Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/security_and_compliance.html">Security and Compliance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deployment</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/upgrade.html">Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../deployment/faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference/model_tests_reference.html">Model Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/python-sdk.html">Python SDK Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/troubleshooting.html">Troubleshooting Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/api_changelog.html">API Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/versions.html">Versioning and compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/legal.html">Robust Intelligence Terms and Conditions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Robust Intelligence</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../testing_and_monitoring/monitoring_models.html">Monitor Models with Continuous Tests</a></li>
      <li class="breadcrumb-item active">Scheduled Continuous Testing</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="Scheduled-Continuous-Testing">
<h1>Scheduled Continuous Testing<a class="headerlink" href="#Scheduled-Continuous-Testing" title="Permalink to this heading"></a></h1>
<p><strong>Instantiate RIME client and create a new project</strong></p>
<p>Let’s begin by creating a new client connection to our Robust Intelligence cluster.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rime_sdk</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">API_TOKEN</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># PASTE API_KEY</span>
<span class="n">CLUSTER_URL</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># PASTE DEDICATED DOMAIN OF RIME SERVICE (eg: rime.stable.rbst.io)</span>
<span class="n">AGENT_ID</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># PASTE AGENT_ID IF USING AN AGENT THAT IS NOT THE DEFAULT</span>

<span class="n">client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="n">CLUSTER_URL</span><span class="p">,</span> <span class="n">API_TOKEN</span><span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">description</span> <span class="o">=</span> <span class="p">(</span>
    <span class="s2">&quot;Create a Continuous Test and set up scheduling.&quot;</span>
    <span class="s2">&quot; Demonstration uses a tabular binary classification dataset&quot;</span>
    <span class="s2">&quot; and model that simulates credit card fraud detection.&quot;</span>
<span class="p">)</span>
<span class="n">project</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_project</span><span class="p">(</span>
    <span class="s2">&quot;Scheduled Continuous Testing Demo&quot;</span><span class="p">,</span>
    <span class="n">description</span><span class="p">,</span>
    <span class="s2">&quot;MODEL_TASK_BINARY_CLASSIFICATION&quot;</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">project_id</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">project_id</span>

<span class="c1"># You can always retrieve a project when re-running the notebook by using its id</span>
<span class="n">project</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">get_project</span><span class="p">(</span><span class="n">project_id</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Create a custom loader function to retrieve data from S3</strong></p>
<p>There are many ways for Continuous Testing (CT) to load in your data. In this example, we’ll write a Python function to generate data and store the function on S3.</p>
<p>The Python function will take in the following parameters:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">start_time</span></code>: Required for scheduled CT. This is needed to grab the proper data based on time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">end_time</span></code>: Required for scheduled CT. This is needed to grab the proper data based on time.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">ref_data</span></code>: Custom parameter for this function (you can add your own custom parameters and let RI know about them once you register your dataset). Returns reference or evaluation dataset for this example notebook based on the value of the boolean.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">preds_only</span></code>: Custom parameter for this function (you can add your own custom parameters and let Robust Intelligence know about them once you register your dataset). Returns the actual data or just the predictions for this example notebook based on the value of the boolean.</p></li>
</ul>
<p>We’ll put this function into a <code class="docutils literal notranslate"><span class="pre">.py</span></code> file and upload it to an S3 bucket. Then, later in the notebook, we will set up our project to download and call this function to generate data to use with CT runs.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="sd">&quot;&quot;&quot;Custom loader for fraud datasets from S3.&quot;&quot;&quot;</span>
<span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">datetime</span>

<span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">subprocess</span>
<span class="kn">import</span> <span class="nn">sys</span>

<span class="k">def</span> <span class="nf">custom_data_loader_func</span><span class="p">(</span>
    <span class="n">start_time</span><span class="p">:</span> <span class="n">datetime</span><span class="p">,</span> <span class="c1"># Note: Required for scheduled CT</span>
    <span class="n">end_time</span><span class="p">:</span> <span class="n">datetime</span><span class="p">,</span> <span class="c1"># Note: Required for scheduled CT</span>
    <span class="n">ref_data</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
    <span class="n">preds_only</span><span class="p">:</span> <span class="nb">bool</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">:</span>
    <span class="c1"># Load the data</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">check_call</span><span class="p">([</span><span class="n">sys</span><span class="o">.</span><span class="n">executable</span><span class="p">,</span> <span class="s2">&quot;-m&quot;</span><span class="p">,</span> <span class="s2">&quot;pip&quot;</span><span class="p">,</span> <span class="s2">&quot;install&quot;</span><span class="p">,</span> <span class="s2">&quot;https://github.com/RobustIntelligence/ri-public-examples/archive/master.zip&quot;</span><span class="p">])</span>

    <span class="kn">from</span> <span class="nn">ri_public_examples.download_files</span> <span class="kn">import</span> <span class="n">download_files</span>
    <span class="n">download_files</span><span class="p">(</span><span class="s1">&#39;tabular-2.0/fraud&#39;</span><span class="p">,</span> <span class="s1">&#39;fraud&#39;</span><span class="p">)</span>

    <span class="n">ct_data</span> <span class="o">=</span> <span class="p">(</span><span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;fraud/data/fraud_incremental_preds.csv&quot;</span><span class="p">)</span>
               <span class="k">if</span> <span class="n">preds_only</span>
               <span class="k">else</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">&quot;fraud/data/fraud_incremental.csv&quot;</span><span class="p">))</span>

    <span class="k">if</span> <span class="n">ref_data</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ct_data</span><span class="p">[:</span><span class="nb">len</span><span class="p">(</span><span class="n">ct_data</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span><span class="p">]</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="k">return</span> <span class="n">ct_data</span><span class="p">[</span><span class="nb">len</span><span class="p">(</span><span class="n">ct_data</span><span class="p">)</span><span class="o">//</span><span class="mi">2</span><span class="p">:]</span>
</pre></div>
</div>
</div>
<p><strong>Create an integration to S3</strong></p>
<p>We need to set up an S3 integration with credential information to be able to properly download the data loading Python file from our S3 bucket. You can find additional information on how to create integrations <a class="reference external" href="https://docs.rime.dev/en/latest/administration/workspace_configuration/integrations.html">here</a>.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">WORKSPACE_ID</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># PASTE WORKSPACE_ID</span>
<span class="n">AWS_ACCESS_KEY_ID</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># PASTE AWS ACCESS KEY ID WITH ACCESS TO YOUR S3 BUCKET</span>
<span class="n">AWS_SECRET_ACCESS_KEY</span> <span class="o">=</span> <span class="s1">&#39;&#39;</span> <span class="c1"># PASTE AWS SECRET ACCESS KEY WITH ACCESS TO YOUR S3 BUCKET</span>

<span class="n">S3_INTEGRATION_ID</span> <span class="o">=</span> <span class="n">client</span><span class="o">.</span><span class="n">create_integration</span><span class="p">(</span>
    <span class="n">workspace_id</span><span class="o">=</span><span class="n">WORKSPACE_ID</span><span class="p">,</span>
    <span class="n">name</span><span class="o">=</span><span class="s2">&quot;s3 integration&quot;</span><span class="p">,</span>
    <span class="n">integration_type</span><span class="o">=</span><span class="s2">&quot;INTEGRATION_TYPE_AWS_ACCESS_KEY&quot;</span><span class="p">,</span>
    <span class="n">integration_schema</span><span class="o">=</span><span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;AWS_ACCESS_KEY_ID&quot;</span><span class="p">,</span>
            <span class="s2">&quot;sensitivity&quot;</span><span class="p">:</span> <span class="s2">&quot;VARIABLE_SENSITIVITY_PUBLIC&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">AWS_ACCESS_KEY_ID</span><span class="p">,</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="s2">&quot;AWS_SECRET_ACCESS_KEY&quot;</span><span class="p">,</span>
            <span class="s2">&quot;sensitivity&quot;</span><span class="p">:</span> <span class="s2">&quot;VARIABLE_SENSITIVITY_WORKSPACE_SECRET&quot;</span><span class="p">,</span>
            <span class="s2">&quot;value&quot;</span><span class="p">:</span> <span class="n">AWS_SECRET_ACCESS_KEY</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">],</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Register datasets with the project</strong></p>
<p>To start a CT run, we need to register our model (optional), datasets and predictions (required if model is not specified) with the project. For dataset registration, we need to specify:</p>
<ul class="simple">
<li><p>the S3 path to the Python file</p></li>
<li><p>the name of the data loading function in the Python file</p></li>
<li><p>the list of custom parameters required by the function (e.g., <code class="docutils literal notranslate"><span class="pre">ref_data</span></code>, <code class="docutils literal notranslate"><span class="pre">preds_only</span></code>)</p></li>
</ul>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">dt</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="n">datetime</span><span class="o">.</span><span class="n">now</span><span class="p">())</span>

<span class="c1"># Note: models and datasets need to have unique names.</span>
<span class="n">model_id</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">register_model</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;fraud_model_</span><span class="si">{</span><span class="n">dt</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span> <span class="kc">None</span><span class="p">,</span> <span class="n">agent_id</span><span class="o">=</span><span class="n">AGENT_ID</span><span class="p">)</span>

<span class="n">ref_data_id</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">register_dataset</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;fraud_reference_dataset</span><span class="si">{</span><span class="n">dt</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">data_config</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;connection_info&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;data_loading&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://pranay-scheduled-ct-test/s3_fraud_custom_loader.py&quot;</span><span class="p">,</span>
            <span class="s2">&quot;load_func_name&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_data_loader_func&quot;</span><span class="p">,</span>
            <span class="s2">&quot;loader_kwargs_json&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">ref_data</span><span class="se">\&quot;</span><span class="s2">: true, </span><span class="se">\&quot;</span><span class="s2">preds_only</span><span class="se">\&quot;</span><span class="s2">: false}&quot;</span><span class="p">,</span>
        <span class="p">}},</span>
        <span class="s2">&quot;data_params&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;label_col&quot;</span><span class="p">:</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timestamp_col&quot;</span><span class="p">:</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="n">integration_id</span><span class="o">=</span><span class="n">S3_INTEGRATION_ID</span><span class="p">,</span>
    <span class="n">agent_id</span><span class="o">=</span><span class="n">AGENT_ID</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">project</span><span class="o">.</span><span class="n">register_predictions</span><span class="p">(</span>
    <span class="n">dataset_id</span><span class="o">=</span><span class="n">ref_data_id</span><span class="p">,</span>
    <span class="n">model_id</span><span class="o">=</span><span class="n">model_id</span><span class="p">,</span>
    <span class="n">pred_config</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;connection_info&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;data_loading&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://pranay-scheduled-ct-test/s3_fraud_custom_loader.py&quot;</span><span class="p">,</span>
            <span class="s2">&quot;load_func_name&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_data_loader_func&quot;</span><span class="p">,</span>
            <span class="s2">&quot;loader_kwargs_json&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">ref_data</span><span class="se">\&quot;</span><span class="s2">: true, </span><span class="se">\&quot;</span><span class="s2">preds_only</span><span class="se">\&quot;</span><span class="s2">: true}&quot;</span><span class="p">,</span>
        <span class="p">}},</span>
        <span class="s2">&quot;pred_params&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;pred_col&quot;</span><span class="p">:</span> <span class="s2">&quot;preds&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="n">integration_id</span><span class="o">=</span><span class="n">S3_INTEGRATION_ID</span><span class="p">,</span>
    <span class="n">agent_id</span><span class="o">=</span><span class="n">AGENT_ID</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">eval_data_id</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">register_dataset</span><span class="p">(</span>
    <span class="n">name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;fraud_evaluation_dataset</span><span class="si">{</span><span class="n">dt</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="n">data_config</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;connection_info&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;data_loading&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://pranay-scheduled-ct-test/s3_fraud_custom_loader.py&quot;</span><span class="p">,</span>
            <span class="s2">&quot;load_func_name&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_data_loader_func&quot;</span><span class="p">,</span>
            <span class="s2">&quot;loader_kwargs_json&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">ref_data</span><span class="se">\&quot;</span><span class="s2">: false, </span><span class="se">\&quot;</span><span class="s2">preds_only</span><span class="se">\&quot;</span><span class="s2">: false}&quot;</span><span class="p">,</span>
        <span class="p">}},</span>
        <span class="s2">&quot;data_params&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;label_col&quot;</span><span class="p">:</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timestamp_col&quot;</span><span class="p">:</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="n">integration_id</span><span class="o">=</span><span class="n">S3_INTEGRATION_ID</span><span class="p">,</span>
    <span class="n">agent_id</span><span class="o">=</span><span class="n">AGENT_ID</span><span class="p">,</span>
<span class="p">)</span>

<span class="n">project</span><span class="o">.</span><span class="n">register_predictions</span><span class="p">(</span>
    <span class="n">dataset_id</span><span class="o">=</span><span class="n">eval_data_id</span><span class="p">,</span>
    <span class="n">model_id</span><span class="o">=</span><span class="n">model_id</span><span class="p">,</span>
    <span class="n">pred_config</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;connection_info&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;data_loading&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://pranay-scheduled-ct-test/s3_fraud_custom_loader.py&quot;</span><span class="p">,</span>
            <span class="s2">&quot;load_func_name&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_data_loader_func&quot;</span><span class="p">,</span>
            <span class="s2">&quot;loader_kwargs_json&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">ref_data</span><span class="se">\&quot;</span><span class="s2">: false, </span><span class="se">\&quot;</span><span class="s2">preds_only</span><span class="se">\&quot;</span><span class="s2">: true}&quot;</span><span class="p">,</span>
        <span class="p">}},</span>
        <span class="s2">&quot;pred_params&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;pred_col&quot;</span><span class="p">:</span> <span class="s2">&quot;preds&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="n">integration_id</span><span class="o">=</span><span class="n">S3_INTEGRATION_ID</span><span class="p">,</span>
    <span class="n">agent_id</span><span class="o">=</span><span class="n">AGENT_ID</span><span class="p">,</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Test everything out with a manual CT run</strong></p>
<p>We don’t want to wait until a scheduled CT run in the future to surface small mistakes (e.g., a typo in the S3 path). We can create a new CT instance and start a manual run to verify that our configuration works as intended before activating scheduling.</p>
<p>NOTE: Data needs to exist and be returned for every time bin. If there is no data for a bin, an error will be returned.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">datetime</span> <span class="kn">import</span> <span class="n">timedelta</span>

<span class="n">ct</span> <span class="o">=</span> <span class="n">project</span><span class="o">.</span><span class="n">create_ct</span><span class="p">(</span><span class="n">model_id</span><span class="p">,</span> <span class="n">ref_data_id</span><span class="p">,</span> <span class="n">bin_size</span><span class="o">=</span><span class="n">timedelta</span><span class="p">(</span><span class="n">days</span><span class="o">=</span><span class="mi">1</span><span class="p">))</span>

<span class="c1"># If you are re-running this notebook and already have created CT for the project, you can retrieve and update the CT object.</span>
<span class="c1"># ct = project.get_ct()</span>
<span class="c1"># ct.update_ct(ref_data_id=ref_data_id)</span>
</pre></div>
</div>
</div>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ct_job</span> <span class="o">=</span> <span class="n">ct</span><span class="o">.</span><span class="n">start_continuous_test</span><span class="p">(</span><span class="n">eval_data_id</span><span class="p">,</span> <span class="n">override_existing_bins</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">agent_id</span><span class="o">=</span><span class="n">AGENT_ID</span><span class="p">)</span>
<span class="n">ct_job</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">wait_until_finish</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Activate Scheduled Continuous Testing</strong></p>
<p>After verifying that CT can successfully load in our data, run tests and push the results to the Robust Intelligence UI, we are ready to activate scheduled CT.</p>
<div class="nbinput nblast docutils container">
<div class="prompt highlight-none notranslate"><div class="highlight"><pre><span></span>[ ]:
</pre></div>
</div>
<div class="input_area highlight-ipython3 notranslate"><div class="highlight"><pre><span></span><span class="n">ct</span><span class="o">.</span><span class="n">activate_ct_scheduling</span><span class="p">(</span>
    <span class="n">data_info</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;connection_info&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;data_loading&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://pranay-scheduled-ct-test/s3_fraud_custom_loader_scheduled_ct.py&quot;</span><span class="p">,</span>
            <span class="s2">&quot;load_func_name&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_data_loader_func&quot;</span><span class="p">,</span>
            <span class="s2">&quot;loader_kwargs_json&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">ref_data</span><span class="se">\&quot;</span><span class="s2">: false, </span><span class="se">\&quot;</span><span class="s2">preds_only</span><span class="se">\&quot;</span><span class="s2">: false}&quot;</span><span class="p">,</span>
        <span class="p">}},</span>
        <span class="s2">&quot;data_params&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;label_col&quot;</span><span class="p">:</span> <span class="s2">&quot;label&quot;</span><span class="p">,</span>
            <span class="s2">&quot;timestamp_col&quot;</span><span class="p">:</span> <span class="s2">&quot;timestamp&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
    <span class="n">data_integration_id</span><span class="o">=</span><span class="n">S3_INTEGRATION_ID</span><span class="p">,</span>
    <span class="n">pred_integration_id</span><span class="o">=</span><span class="n">S3_INTEGRATION_ID</span><span class="p">,</span>
    <span class="n">pred_info</span><span class="o">=</span><span class="p">{</span>
        <span class="s2">&quot;connection_info&quot;</span><span class="p">:</span> <span class="p">{</span><span class="s2">&quot;data_loading&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://pranay-scheduled-ct-test/s3_fraud_custom_loader_scheduled_ct.py&quot;</span><span class="p">,</span>
            <span class="s2">&quot;load_func_name&quot;</span><span class="p">:</span> <span class="s2">&quot;custom_data_loader_func&quot;</span><span class="p">,</span>
            <span class="s2">&quot;loader_kwargs_json&quot;</span><span class="p">:</span> <span class="s2">&quot;{</span><span class="se">\&quot;</span><span class="s2">ref_data</span><span class="se">\&quot;</span><span class="s2">: false, </span><span class="se">\&quot;</span><span class="s2">preds_only</span><span class="se">\&quot;</span><span class="s2">: true}&quot;</span><span class="p">,</span>
        <span class="p">}},</span>
        <span class="s2">&quot;pred_params&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;pred_col&quot;</span><span class="p">:</span> <span class="s2">&quot;preds&quot;</span><span class="p">,</span>
        <span class="p">},</span>
    <span class="p">},</span>
<span class="p">)</span>
</pre></div>
</div>
</div>
<p><strong>Some additional methods to work with Scheduled CT</strong></p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Find the schedule for CT</span>
<span class="n">ct</span><span class="o">.</span><span class="n">get_scheduled_ct_info</span><span class="p">()</span>

<span class="c1"># Deactivate the schedule for CT</span>
<span class="n">ct</span><span class="o">.</span><span class="n">deactivate_ct_scheduling</span><span class="p">()</span>

<span class="c1"># Update the reference dataset for a scheduled Continuous Test</span>
<span class="n">ct</span><span class="o">.</span><span class="n">update_ct</span><span class="p">(</span><span class="n">ref_data_id</span><span class="o">=</span><span class="n">new_ref_data_id</span><span class="p">)</span>
</pre></div>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../../testing_and_monitoring/monitoring_models.html" class="btn btn-neutral float-left" title="Monitor Models with Continuous Tests" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../../testing_and_monitoring/monitoring_models/ct_feedback_and_observability.html" class="btn btn-neutral float-right" title="Continuous Testing Feedback and Observability" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Robust Intelligence.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>