<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Local Agent &mdash; RIME  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="https://cdn.datatables.net/v/dt/dt-1.13.1/sb-1.4.0/datatables.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script src="../../_static/main.js"></script>
        <script src="https://cdn.datatables.net/v/dt/dt-1.13.1/sb-1.4.0/datatables.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Managed Cloud" href="../mcloudinst.html" />
    <link rel="prev" title="Upgrading the Agent" href="upgrade.html" />
<link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">
<div class="ge_header no-print">
    <a id="header-logo" href="../../index.html">
        <img src="../../_static/header-logo.png" alt="logo" />
    </a>
</div>


  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            RIME
          </a>
              <div class="version">
                2.0.0-beta.9
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">RIME at a Glance</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../getstarted/product-overview.html">RIME and machine learning</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getstarted/workspace-overview.html">The RIME Workspace Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getstarted/modeltesting.html">RIME model testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../getstarted/modeltesting.html#rime-local-trial">RIME local trial</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Data science with RIME</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../for_data_scientists/get_started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../for_data_scientists/basic_tasks.html">Basic tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../for_data_scientists/adv_tasks.html">Advanced tasks</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../for_data_scientists/reference.html">Reference</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Administering RIME</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../for_admins/userauthnz.html">Users, authorization, and authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../for_admins/naviconf.html">Navigating and configuring RIME</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../for_admins/fixtrouble.html">Troubleshooting a RIME deployment</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Installing RIME</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Installation Concepts</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../cloudinst.html">Cloud</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="arch_overview.html">Architecture Overview</a></li>
<li class="toctree-l2"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l2"><a class="reference internal" href="agent_configuration.html">Agent Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="deployment.html">Deploying the Agent</a></li>
<li class="toctree-l2"><a class="reference internal" href="upgrade.html">Upgrading the Agent</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Local Agent</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#reasons-to-use-a-local-agent">Reasons to Use a Local Agent</a></li>
<li class="toctree-l3"><a class="reference internal" href="#setting-up-your-local-cluster">Setting up your Local Cluster</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#prerequisites">Prerequisites</a></li>
<li class="toctree-l4"><a class="reference internal" href="#kind">Kind</a></li>
<li class="toctree-l4"><a class="reference internal" href="#minikube">Minikube</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#using-your-local-agent">Using your Local Agent</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../mcloudinst.html">Managed Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="../shostedinst.html">Self-Hosted</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">SDK reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../python_library/get_started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_library/python-sdk.html">Python SDK reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_library/how_to_guides.html">Python SDK tutorials</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../python_library/reference.html">API Test Reference</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">RIME</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../cloudinst.html">Cloud</a></li>
      <li class="breadcrumb-item active">Local Agent</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/installation/cloud/local.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="local-agent">
<h1>Local Agent<a class="headerlink" href="#local-agent" title="Permalink to this heading"></a></h1>
<p>The RI Platform Agent can be installed on a local Kubernetes cluster using Kind or Minikube.</p>
<section id="reasons-to-use-a-local-agent">
<h2>Reasons to Use a Local Agent<a class="headerlink" href="#reasons-to-use-a-local-agent" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>The local agent runs on your machine. You do not need access to a Kubernetes cluster running on your organization’s cloud.</p></li>
<li><p>Running locally also gives you full access and observability into the running tests for easy debugging and insight into resource usage.</p></li>
<li><p>The local agent can use data and model files from your local file system. You do not need to upload the data to cloud storage or grant the agent permissions to read from cloud storage.</p></li>
</ul>
</section>
<section id="setting-up-your-local-cluster">
<h2>Setting up your Local Cluster<a class="headerlink" href="#setting-up-your-local-cluster" title="Permalink to this heading"></a></h2>
<section id="prerequisites">
<h3>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Directory on your local file system that will contain all the model and data files you wish to use with your local agent. You can put more files into this directory at any time, but you must decide on the path of the directory before installing the agent. For example: <code class="docutils literal notranslate"><span class="pre">/Users/name/Documents/my-data-directory</span></code>.</p></li>
<li><p><a class="reference external" href="https://docs.docker.com/engine/install/">Docker</a></p>
<ul>
<li><p>Agent deployment requires docker to have access to 8GB+ of memory. This can be set via Docker Desktop in Preferences &gt; Resources &gt; Advanced &gt; Memory.</p></li>
<li><p>Include the absolute path of the directory containing the data and model files you intend to use with the local agent in Docker’s File Sharing. This can be set via Docker Desktop in Preferences &gt; Resources &gt; File Sharing.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://helm.sh/docs/intro/install/">Helm</a></p></li>
<li><p><a class="reference external" href="https://kubernetes.io/docs/tasks/tools/">kubectl</a></p></li>
</ul>
<p>The local agent can run on any K8s cluster. We recommend using Kind or Minikube for simplicity and easy mounting of your local files to the virtual nodes.</p>
</section>
<section id="kind">
<h3>Kind<a class="headerlink" href="#kind" title="Permalink to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Install <a class="reference external" href="https://kind.sigs.k8s.io/docs/user/quick-start/#installation">Kind</a>.</p></li>
<li><p>Create a configuration file for your Kind cluster that mounts the directory containing your data and models to <code class="docutils literal notranslate"><span class="pre">/ri-platform/local/</span></code> on the virtual nodes.</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cluster</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kind.x-k8s.io/v1alpha4</span>
<span class="nt">nodes</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">control-plane</span>
<span class="w">  </span><span class="nt">extraMounts</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hostPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;ABSOLUTE PATH ON LOCAL FILESYSTEM&gt;</span>
<span class="w">      </span><span class="nt">containerPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/ri-platform/local</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>With docker running, create the cluster:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">kind</span> <span class="pre">create</span> <span class="pre">cluster</span> <span class="pre">--config</span> <span class="pre">&lt;above</span> <span class="pre">config</span> <span class="pre">file&gt;</span></code></p></li>
</ol>
</li>
<li><p>Ensure your <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> context is set to the cluster you created:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">config</span> <span class="pre">use-context</span> <span class="pre">kind</span></code></p></li>
</ol>
</li>
<li><p>Follow the steps in <a class="reference internal" href="deployment.html"><span class="doc std std-doc">Deployment</span></a> to deploy an agent onto your Kind cluster.</p></li>
</ol>
</section>
<section id="minikube">
<h3>Minikube<a class="headerlink" href="#minikube" title="Permalink to this heading"></a></h3>
<ol class="arabic simple">
<li><p>Install <a class="reference external" href="https://minikube.sigs.k8s.io/docs/start/">Minikube</a></p></li>
<li><p>With docker running, create the cluster:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">minikube</span> <span class="pre">start</span></code></p></li>
</ul>
</li>
<li><p>Ensure your <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> context is set to the cluster you created:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">config</span> <span class="pre">use-context</span> <span class="pre">minikube</span></code></p></li>
</ul>
</li>
<li><p>In a separate terminal, use a <a class="reference external" href="https://minikube.sigs.k8s.io/docs/handbook/mount/">9P mount</a> to mount the directory containing your data and models to <code class="docutils literal notranslate"><span class="pre">/ri-platform/local</span></code> on the virtual nodes.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">minikube</span> <span class="pre">mount</span> <span class="pre">&lt;ABSOLUTE</span> <span class="pre">PATH</span> <span class="pre">ON</span> <span class="pre">LOCAL</span> <span class="pre">FILESYSTEM&gt;:/ri-platform/local</span></code></p></li>
<li><p>This will create a long running process that must be kept alive in order for the mount to work properly.</p></li>
</ul>
</li>
<li><p>Follow the steps in <a class="reference internal" href="deployment.html"><span class="doc std std-doc">Deployment</span></a> to deploy an agent onto your Minikube cluster.</p></li>
</ol>
</section>
</section>
<section id="using-your-local-agent">
<h2>Using your Local Agent<a class="headerlink" href="#using-your-local-agent" title="Permalink to this heading"></a></h2>
<p>When specifying paths to data or model files in test run configurations, replace the path to the directory on your local filesystem that you mounted with <code class="docutils literal notranslate"><span class="pre">/ri-platform/local</span></code>.</p>
<p>For example, if you mounted <code class="docutils literal notranslate"><span class="pre">/Users/name/Documents/my-data-directory</span></code>, and that directory contains:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">data/</span></code></p>
<ul>
<li><p><code class="docutils literal notranslate"><span class="pre">ref.csv</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">eval.csv</span></code></p></li>
</ul>
</li>
<li><p><code class="docutils literal notranslate"><span class="pre">model.py</span></code></p></li>
</ul>
<p>You would specify those files in a test configuration as:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="n">config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;data_info&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;ref_path&quot;</span><span class="p">:</span> <span class="s2">&quot;/ri-platform/local/data/ref.csv&quot;</span><span class="p">,</span> 
        <span class="s2">&quot;eval_path&quot;</span><span class="p">:</span> <span class="s2">&quot;/ri-platform/local/data/eval.csv&quot;</span><span class="p">,</span>
        <span class="o">...</span>
    <span class="p">},</span> 
    <span class="s2">&quot;model_info&quot;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/ri-platform/local/model.py&quot;</span>
    <span class="p">},</span> 
    <span class="o">...</span>
<span class="p">}</span>

</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="upgrade.html" class="btn btn-neutral float-left" title="Upgrading the Agent" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../mcloudinst.html" class="btn btn-neutral float-right" title="Managed Cloud" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Robust Intelligence.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>