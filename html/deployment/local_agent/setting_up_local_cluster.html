<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Setting up your Local Cluster &mdash; Robust Intelligence  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/tabs.css" type="text/css" />
      <link rel="stylesheet" href="https://cdn.datatables.net/v/dt/dt-1.13.1/sb-1.4.0/datatables.min.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../../_static/main.js"></script>
        <script src="https://cdn.datatables.net/v/dt/dt-1.13.1/sb-1.4.0/datatables.min.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Using your Local Agent" href="using_your_local_agent.html" />
    <link rel="prev" title="Local Agent" href="../local_agent.html" />
<link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">
<div class="ge_header no-print">
    <a id="header-logo" href="../../index.html">
        <img src="../../_static/header-logo.png" alt="logo" />
    </a>
</div>


  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            Robust Intelligence
          </a>
              <div class="version">
                2.0.0-rc.14
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_home/robust_intelligence_intro.html">What is Robust Intelligence?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../documentation_home/get_started.html">Get Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testing and Monitoring</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/creating_projects.html">Creating Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/preparing_your_models_and_datasets.html">Preparing your Models and Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/validating_models.html">Validate Models with Stress Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/monitoring_models.html">Monitor Models with Continuous Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/querying_results.html">Querying Test Run Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/notifications_and_alerts.html">Notifications and Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/model_governance.html">Managing Model Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/configuring_test_runs.html">Configuring your Test Runs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/test_customization.html">Test Customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../testing_and_monitoring/integrating_mlops.html">Integrating with MLOps</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Administration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../administration/organization_administration.html">Organization Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/configuring_workspaces.html">Workspace Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../administration/security_and_compliance.html">Security and Compliance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deployment</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../requirements.html">Requirements</a></li>
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../faq.html">FAQ</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../local_agent.html">Local Agent</a><ul class="current">
<li class="toctree-l3 current"><a class="reference internal" href="../local_agent.html#reasons-to-use-a-local-agent">Reasons to Use a Local Agent</a><ul class="current">
<li class="toctree-l4 current"><a class="current reference internal" href="#">Setting up your Local Cluster</a></li>
<li class="toctree-l4"><a class="reference internal" href="using_your_local_agent.html">Using your Local Agent</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../self_hosted.html">Self-Hosted</a></li>
<li class="toctree-l2"><a class="reference internal" href="../../reference/api_changelog.html">API Changelog</a></li>
</ul>
</li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference/release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/python-sdk.html">Python SDK reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/troubleshooting.html">Troubleshooting Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/model_tests_reference.html">Model Tests Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/api_changelog.html">API Changelog</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Robust Intelligence</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../faq.html">FAQ</a></li>
          <li class="breadcrumb-item"><a href="../local_agent.html">Local Agent</a></li>
      <li class="breadcrumb-item active">Setting up your Local Cluster</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="setting-up-your-local-cluster">
<h1>Setting up your Local Cluster<a class="headerlink" href="#setting-up-your-local-cluster" title="Permalink to this heading"></a></h1>
<section id="prerequisites">
<h2>Prerequisites<a class="headerlink" href="#prerequisites" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Directory on your local file system that will contain all the model and data files you wish to use with your local agent. You can put more files into this directory at any time, but you must decide on the path of the directory before installing the agent. For example: <code class="docutils literal notranslate"><span class="pre">/Users/name/Documents/my-data-directory</span></code>.</p></li>
<li><p><a class="reference external" href="https://docs.docker.com/engine/install/">Docker</a></p>
<ul>
<li><p>Agent deployment requires docker to have access to 8GB+ of memory. This can be set via Docker Desktop in Preferences &gt; Resources &gt; Advanced &gt; Memory.</p></li>
<li><p>Include the absolute path of the directory containing the data and model files you intend to use with the local agent in Docker’s File Sharing. This can be set via Docker Desktop in Preferences &gt; Resources &gt; File Sharing.</p></li>
</ul>
</li>
<li><p><a class="reference external" href="https://helm.sh/docs/intro/install/">Helm</a></p></li>
<li><p><a class="reference external" href="https://kubernetes.io/docs/tasks/tools/">kubectl</a></p></li>
</ul>
<p>The local agent can run on any K8s cluster. We recommend using Kind or Minikube for simplicity and easy mounting of your local files to the virtual nodes.</p>
</section>
<section id="kind">
<h2>Kind<a class="headerlink" href="#kind" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Install <a class="reference external" href="https://kind.sigs.k8s.io/docs/user/quick-start/#installation">Kind</a>.</p></li>
<li><p>Create a configuration file for your Kind cluster that mounts the directory containing your data and models to <code class="docutils literal notranslate"><span class="pre">/ri-platform/local/</span></code> on the virtual nodes.</p></li>
</ol>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="nt">kind</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Cluster</span>
<span class="nt">apiVersion</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">kind.x-k8s.io/v1alpha4</span>
<span class="nt">nodes</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">role</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">control-plane</span>
<span class="w">  </span><span class="nt">extraMounts</span><span class="p">:</span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">hostPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">&lt;ABSOLUTE PATH ON LOCAL FILESYSTEM&gt;</span>
<span class="w">      </span><span class="nt">containerPath</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">/ri-platform/local</span>
</pre></div>
</div>
<ol class="arabic simple" start="3">
<li><p>With docker running, create the cluster:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">kind</span> <span class="pre">create</span> <span class="pre">cluster</span> <span class="pre">--config</span> <span class="pre">&lt;above</span> <span class="pre">config</span> <span class="pre">file&gt;</span></code></p></li>
</ol>
</li>
<li><p>Ensure your <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> context is set to the cluster you created:</p>
<ol class="arabic simple">
<li><p><code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">config</span> <span class="pre">use-context</span> <span class="pre">kind</span></code></p></li>
</ol>
</li>
<li><p>Follow the steps in <a class="reference internal" href="../installation.html"><span class="std std-doc">Helm Installation</span></a> to deploy an agent onto your Kind cluster.</p></li>
</ol>
</section>
<section id="minikube">
<h2>Minikube<a class="headerlink" href="#minikube" title="Permalink to this heading"></a></h2>
<ol class="arabic simple">
<li><p>Install <a class="reference external" href="https://minikube.sigs.k8s.io/docs/start/">Minikube</a></p></li>
<li><p>With docker running, create the cluster:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">minikube</span> <span class="pre">start</span></code></p></li>
</ul>
</li>
<li><p>Ensure your <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> context is set to the cluster you created:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">config</span> <span class="pre">use-context</span> <span class="pre">minikube</span></code></p></li>
</ul>
</li>
<li><p>In a separate terminal, use a <a class="reference external" href="https://minikube.sigs.k8s.io/docs/handbook/mount/">9P mount</a> to mount the directory containing your data and models to <code class="docutils literal notranslate"><span class="pre">/ri-platform/local</span></code> on the virtual nodes.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">minikube</span> <span class="pre">mount</span> <span class="pre">&lt;ABSOLUTE</span> <span class="pre">PATH</span> <span class="pre">ON</span> <span class="pre">LOCAL</span> <span class="pre">FILESYSTEM&gt;:/ri-platform/local</span></code></p></li>
<li><p>This will create a long running process that must be kept alive in order for the mount to work properly.</p></li>
</ul>
</li>
<li><p>Follow the steps in <a class="reference internal" href="../installation.html"><span class="std std-doc">Helm Installation</span></a> to deploy an agent onto your Minikube cluster.</p></li>
</ol>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../local_agent.html" class="btn btn-neutral float-left" title="Local Agent" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="using_your_local_agent.html" class="btn btn-neutral float-right" title="Using your Local Agent" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2023, Robust Intelligence.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>