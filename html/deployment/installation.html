<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.19: https://docutils.sourceforge.io/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Installation &mdash; Robust Intelligence  documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css" />
      <link rel="stylesheet" type="text/css" href="../_static/copybutton.css" />
      <link rel="stylesheet" type="text/css" href="../_static/tabs.css" />
      <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/v/dt/dt-1.13.1/sb-1.4.0/datatables.min.css" />
      <link rel="stylesheet" type="text/css" href="../_static/custom.css" />

  
    <link rel="shortcut icon" href="../_static/favicon.ico"/>
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
        <script src="../_static/sphinx_highlight.js"></script>
        <script src="../_static/clipboard.min.js"></script>
        <script src="../_static/copybutton.js"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
        <script src="../_static/main.js"></script>
        <script src="https://cdn.datatables.net/v/dt/dt-1.13.1/sb-1.4.0/datatables.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Upgrade" href="upgrade.html" />
    <link rel="prev" title="Data Access Permissions" href="requirements/data_access_permissions.html" />
<link href="../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">
<div class="ge_header no-print">
    <a id="header-logo" href="../index.html">
        <img src="../_static/images/header-logo.png" alt="logo" />
    </a>
</div>


  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            Robust Intelligence
          </a>
              <div class="version">
                2.6.2
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation Home</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../documentation_home/robust_intelligence_intro.html">What is Robust Intelligence?</a></li>
<li class="toctree-l1"><a class="reference internal" href="../documentation_home/get_started.html">Get Started</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Testing</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../testing_and_monitoring/creating_projects.html">Creating Projects</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing_and_monitoring/preparing_your_models_and_datasets.html">Preparing Your Models and Datasets</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing_and_monitoring/validating_models.html">Validate Models with Stress Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing_and_monitoring/monitoring_models.html">Scheduled Stress Testing</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing_and_monitoring/configuring_test_runs.html">Configuring your Test Runs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing_and_monitoring/querying_results.html">Querying Test Run Results</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing_and_monitoring/notifications_and_alerts.html">Notifications and Alerts</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing_and_monitoring/model_governance.html">Managing Model Governance</a></li>
<li class="toctree-l1"><a class="reference internal" href="../testing_and_monitoring/integrating_mlops.html">Integrating with MLOps</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Administration</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../administration/organization_administration.html">Organization Administration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../administration/workspace_configuration.html">Workspace Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../administration/security_and_compliance.html">Security and Compliance</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Deployment</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="index.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="requirements.html">Requirements</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Installation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#agent-setup">Agent Setup</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#helm-installation">Helm Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#validation">Validation</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#infrastructure">Infrastructure</a></li>
<li class="toctree-l3"><a class="reference internal" href="#web-client">Web Client</a></li>
<li class="toctree-l3"><a class="reference internal" href="#python-sdk-and-rest-api">Python SDK and REST API</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#monitoring-setup-optional">Monitoring Setup (optional)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#id1">Helm Installation</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#log-archival-setup-recommended">Log Archival Setup (recommended)</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#log-archival-helm">Helm Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#terraform-installation">Terraform Installation</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="upgrade.html">Upgrade</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">FAQ</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../reference/model_tests_reference.html">Model Tests</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/python-sdk.html">Python SDK Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/troubleshooting.html">Troubleshooting Home</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/release_notes.html">Release Notes</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/api_changelog.html">API Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/versions.html">Versioning and compatibility</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference/legal.html">Robust Intelligence Terms and Conditions</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Robust Intelligence</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Installation</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="installation">
<span id="deploying-an-agent"></span><h1>Installation<a class="headerlink" href="#installation" title="Permalink to this heading"></a></h1>
<p>Be sure to complete the prerequisites from <a class="reference internal" href="requirements.html#deployment-requirements"><span class="std std-ref">Requirements</span></a> before proceeding.</p>
<p>Particularly, make sure you have your data access credentials (e.g., IAM Role ARN for AWS EKS + S3) ready before going through the Agent Setup below.</p>
<section id="agent-setup">
<h2>Agent Setup<a class="headerlink" href="#agent-setup" title="Permalink to this heading"></a></h2>
<p>Robust Intelligence provides a self-guided installation process through the web client, which will automatically generate a pre-filled Helm values file for your agent based on your cloud configuration.</p>
<p>To begin, sign in to your Administrator account, navigate to the <strong>Organization Settings</strong> page, and click on the <strong>Manage Agent Setup</strong> tab.</p>
<p>From there, clicking on the <strong>Create Agent</strong> button will launch a modal that walks you through the self-guided installation.</p>
<img src="../_static/images/agent-setup.png" style="max-height:400px"/><p>Select a unique name to identify your agent, and input the data access credentials generated during the <a class="reference internal" href="requirements.html#deployment-requirements"><span class="std std-ref">Requirements</span></a> phase.</p>
<p>Upon completing the setup, you will receive the following:</p>
<blockquote>
<div><ol class="arabic simple">
<li><p>A pre-filled <code class="docutils literal notranslate"><span class="pre">*_values.yaml</span></code> file for the <code class="docutils literal notranslate"><span class="pre">rime-agent</span></code> Helm chart</p></li>
<li><p>Helm commands to install the chart</p></li>
</ol>
</div></blockquote>
<section id="helm-installation">
<h3>Helm Installation<a class="headerlink" href="#helm-installation" title="Permalink to this heading"></a></h3>
<ol class="arabic">
<li><p>Point your local <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> to your data plane K8s cluster and namespace.</p></li>
<li><p>Execute the provided Helm commands to install the agent in your K8s cluster. They will look like this:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>helm repo add robustintelligence https://robustintelligence.github.io/helm --force-update

helm upgrade -i rime-agent robustintelligence/rime-agent \
   --version $RI_VERSION \
   --values $PATH_TO_VALUES_FILE
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="validation">
<h2>Validation<a class="headerlink" href="#validation" title="Permalink to this heading"></a></h2>
<p>After performing the Helm installation, use the following reference to should smoke test your agent installation.</p>
<section id="infrastructure">
<h3>Infrastructure<a class="headerlink" href="#infrastructure" title="Permalink to this heading"></a></h3>
<ol class="arabic">
<li><p>Point your local <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> to your data plane K8s cluster and namespace.</p></li>
<li><p>Inspect the <strong>Deployments</strong>. All containers should be ready.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">&gt;</span> <span class="n">kubectl</span> <span class="n">get</span> <span class="n">deployments</span>

<span class="n">NAME</span>                                     <span class="n">READY</span>   <span class="n">UP</span><span class="o">-</span><span class="n">TO</span><span class="o">-</span><span class="n">DATE</span>   <span class="n">AVAILABLE</span>   <span class="n">AGE</span>
<span class="n">rime</span><span class="o">-</span><span class="n">agent</span><span class="o">-</span><span class="n">launcher</span>                      <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">1</span>            <span class="mi">1</span>           <span class="mi">5</span><span class="n">m26s</span>
<span class="n">rime</span><span class="o">-</span><span class="n">agent</span><span class="o">-</span><span class="n">operator</span><span class="o">-</span><span class="n">controller</span><span class="o">-</span><span class="n">manager</span>   <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">1</span>            <span class="mi">1</span>           <span class="mi">5</span><span class="n">m26s</span>
<span class="n">rime</span><span class="o">-</span><span class="n">agent</span><span class="o">-</span><span class="n">rime</span><span class="o">-</span><span class="n">cross</span><span class="o">-</span><span class="n">plane</span><span class="o">-</span><span class="n">server</span>       <span class="mi">1</span><span class="o">/</span><span class="mi">1</span>     <span class="mi">1</span>            <span class="mi">1</span>           <span class="mi">5</span><span class="n">m26s</span>
</pre></div>
</div>
</li>
</ol>
</section>
<section id="web-client">
<h3>Web Client<a class="headerlink" href="#web-client" title="Permalink to this heading"></a></h3>
<p>The status of the agent is regularly updated on the <strong>Agents Setup</strong> page of <strong>Organization Settings</strong> (as well as the <strong>Agent Status</strong> page of <strong>Workspace Settings</strong>).</p>
<ol class="arabic">
<li><p>Verify that the new agent has a status of <code class="docutils literal notranslate"><span class="pre">Active</span></code> in the web client.</p>
<img src="../_static/images/agent-status.png" style="max-height:180px"/><p><strong>Make note of the new agent’s ID, as you will need to reference it for the other steps.</strong></p>
</li>
<li><p>Connect the agent to at least one Workspace via the <a class="reference internal" href="../administration/workspace_configuration.html#workspace-configuration"><span class="std std-ref">Workspace Agent Configuration</span></a> steps.</p></li>
</ol>
</section>
<section id="python-sdk-and-rest-api">
<h3>Python SDK and REST API<a class="headerlink" href="#python-sdk-and-rest-api" title="Permalink to this heading"></a></h3>
<p>The following commands should each return a list of the agents currently assigned to your Workspace.
Be sure to use an <a class="reference internal" href="../administration/security_and_compliance.html#userauth"><span class="std std-ref">API Token</span></a> from a Workspace that you connected to the new agent.</p>
<p>Verify that the outputs of the commands contain a <code class="docutils literal notranslate"><span class="pre">uuid</span></code> matching that of the newly-deployed agent.</p>
<dl>
<dt>Python SDK</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rime_sdk</span> <span class="kn">import</span> <span class="n">Client</span>

<span class="n">rime_client</span> <span class="o">=</span> <span class="n">Client</span><span class="p">(</span><span class="s2">&quot;rime.&lt;DOMAIN&gt;.com&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;API_TOKEN&gt;&quot;</span><span class="p">)</span>

<span class="p">[</span><span class="nb">print</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">rime_client</span><span class="o">.</span><span class="n">list_agents</span><span class="p">()]</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s1">&#39;agent_id&#39;</span><span class="p">:</span> <span class="p">{</span><span class="s1">&#39;uuid&#39;</span><span class="p">:</span> <span class="o">...</span> <span class="p">}</span>
</pre></div>
</div>
</dd>
<dt>REST API</dt><dd><div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">curl</span> <span class="o">-</span><span class="n">X</span> <span class="n">GET</span> <span class="s1">&#39;rime.$DOMAIN.com/v1/agents&#39;</span> \
   <span class="o">--</span><span class="n">header</span> <span class="s2">&quot;rime-api-key: $API_TOKEN&quot;</span> \
   <span class="o">--</span><span class="n">header</span> <span class="s2">&quot;Content-Type: application/json&quot;</span>
</pre></div>
</div>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span><span class="s2">&quot;agents&quot;</span><span class="p">:[{</span><span class="s2">&quot;agentId&quot;</span><span class="p">:{</span><span class="s2">&quot;uuid:&quot;</span><span class="p">:</span> <span class="o">...</span> <span class="p">}</span><span class="o">%</span>
</pre></div>
</div>
</dd>
</dl>
</section>
</section>
<section id="monitoring-setup-optional">
<h2>Monitoring Setup (optional)<a class="headerlink" href="#monitoring-setup-optional" title="Permalink to this heading"></a></h2>
<p>You may optionally install the <code class="docutils literal notranslate"><span class="pre">rime-extras</span></code> helm chart which provides system/application monitoring via the Datadog Agent and Prometheus Node Exporter.</p>
<section id="id1">
<h3>Helm Installation<a class="headerlink" href="#id1" title="Permalink to this heading"></a></h3>
<ol class="arabic">
<li><p>Point your local <code class="docutils literal notranslate"><span class="pre">kubectl</span></code> to your data plane K8s cluster and namespace.</p></li>
<li><p>Create a <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> file enabling the Datadog Agent and Prometheus Node Exporter:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rimeExtras</span><span class="p">:</span>
   <span class="c1"># -- Whether to install the DataDog Agent</span>
   <span class="n">datadog</span><span class="p">:</span> <span class="n">true</span>
   <span class="c1"># -- Whether to install the Prometheus Node Exporter</span>
   <span class="n">prometheusNodeExporter</span><span class="p">:</span> <span class="n">true</span>
</pre></div>
</div>
</li>
<li><p>Execute the below Helm commands to install the chart in your K8s cluster:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span>helm repo add robustintelligence https://robustintelligence.github.io/helm --force-update

helm upgrade -i rime-extras robustintelligence/rime-extras \
   --values $PATH_TO_VALUES_FILE
</pre></div>
</div>
</li>
</ol>
</section>
</section>
<section id="log-archival-setup-recommended">
<h2>Log Archival Setup (recommended)<a class="headerlink" href="#log-archival-setup-recommended" title="Permalink to this heading"></a></h2>
<p>For convenient debugging, you can configure the agent to capture logs for failed jobs. Once enabled, the log archival feature automatically uploads failed job logs to your AWS S3 bucket, which can then be consumed via the Python SDK or REST APIs (see <a class="reference internal" href="../testing_and_monitoring/querying_results/fetching_test_run_logs.html"><span class="doc">Fetching Test Run Logs</span></a> for more details).</p>
<p>While log archival has been designed for AWS, it can also be
configured to work with Azure or GCP storage. For help setting up with
Azure or GCP, contact the Robust Intelligence solutions team.</p>
<p>To set up log archival, see the section below that corresponds to your
deployment approach:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#log-archival-helm"><span class="std std-ref">Helm Installation</span></a></p></li>
<li><p><a class="reference internal" href="#log-archival-terraform"><span class="std std-ref">Terraform Installation</span></a></p></li>
</ul>
<section id="log-archival-helm">
<span id="id2"></span><h3>Helm Installation<a class="headerlink" href="#log-archival-helm" title="Permalink to this heading"></a></h3>
<p>If you manage your Robust Intelligence agent installation via Helm, follow the instructions below.</p>
<ol class="arabic">
<li><dl class="simple">
<dt>Collect the following information:</dt><dd><ul class="simple">
<li><dl class="simple">
<dt>The IAM Role for the agent.</dt><dd><ul>
<li><p>This can be found under <code class="docutils literal notranslate"><span class="pre">rimeAgent.operator.modelTestJob.serviceAccount.annotations.eks.amazonaws.com/role-arn</span></code>.</p></li>
<li><p>Create the role now if it does not exist. See <a class="reference internal" href="requirements/data_access_permissions.html"><span class="doc">Data Access Permissions</span></a>.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>The name of the Service Account used for the operator controller manager (default is <code class="docutils literal notranslate"><span class="pre">rime-agent-operator</span></code>).</dt><dd><ul>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">-n</span> <span class="pre">&lt;namespace&gt;</span> <span class="pre">get</span> <span class="pre">pods</span></code> and find the pod name for the operator. The name should be similar to <code class="docutils literal notranslate"><span class="pre">rime-agent-operator-controller-manager</span></code>.</p></li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">kubectl</span> <span class="pre">-n</span> <span class="pre">&lt;namespace&gt;</span> <span class="pre">describe</span> <span class="pre">pod</span> <span class="pre">&lt;pod_name&gt;</span> <span class="pre">|</span> <span class="pre">grep</span> <span class="pre">'Service</span> <span class="pre">Account:'</span></code> to locate the Service Account name.</p></li>
</ul>
</dd>
</dl>
</li>
<li><dl class="simple">
<dt>The ARN of the S3 bucket where you want logs to be uploaded. <strong>Note: The S3 bucket must be in the same region as the EKS cluster.</strong></dt><dd><ul>
<li><p>We recommend using the default S3 bucket made during the initial installation.</p></li>
<li><p>Logs will be stored in a <cite>/logs</cite> folder.</p></li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
<li><p>Expand the trust relationship of the agent’s IAM Role to include the Service Account of the operator controller manager.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">TRUST</span> <span class="n">RELATIONSHIP</span> <span class="n">OF</span> <span class="n">AGENT</span> <span class="n">IAM</span> <span class="n">ROLE</span>
<span class="p">{</span>
    <span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="o">...</span>
            <span class="s2">&quot;Condition&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;StringEquals&quot;</span><span class="p">:</span> <span class="p">{</span>
                    <span class="s2">&quot;oidc.eks.region-code.amazonaws.com/id/EXAMPLED539D4633E53DE1B71EXAMPLE:sub&quot;</span><span class="p">:</span> <span class="p">[</span>
                        <span class="o">...</span>
                        <span class="s2">&quot;system:serviceaccount:$AGENT_NAMESPACE:$AGENT_OPERATOR_SERVICE_ACCOUNT&quot;</span>
                    <span class="p">]</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Create a new IAM Policy with permissions that allow for management of log files.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="o">//</span> <span class="n">PERMISSION</span> <span class="n">POLICY</span> <span class="n">FOR</span> <span class="n">LOG</span> <span class="n">ARCHIVAL</span>
<span class="p">{</span>
    <span class="s2">&quot;Version&quot;</span><span class="p">:</span> <span class="s2">&quot;2012-10-17&quot;</span><span class="p">,</span>
    <span class="s2">&quot;Statement&quot;</span><span class="p">:</span> <span class="p">[</span>
        <span class="p">{</span>
            <span class="s2">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;LogArchivalAccessBucket&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;s3:ListBucket&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Resource&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;&lt;BUCKET_ARN&gt;&quot;</span>
            <span class="p">]</span>
        <span class="p">},</span>
        <span class="p">{</span>
            <span class="s2">&quot;Sid&quot;</span><span class="p">:</span> <span class="s2">&quot;LogArchivalAccess&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Effect&quot;</span><span class="p">:</span> <span class="s2">&quot;Allow&quot;</span><span class="p">,</span>
            <span class="s2">&quot;Action&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;s3:GetObject&quot;</span><span class="p">,</span>
                <span class="s2">&quot;s3:DeleteObject&quot;</span><span class="p">,</span>
                <span class="s2">&quot;s3:PutObject&quot;</span>
            <span class="p">],</span>
            <span class="s2">&quot;Resource&quot;</span><span class="p">:</span> <span class="p">[</span>
                <span class="s2">&quot;&lt;BUCKET_ARN&gt;/logs/*&quot;</span>
            <span class="p">]</span>
        <span class="p">}</span>
    <span class="p">]</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Attach this policy to the agent IAM Role.</p></li>
<li><p>Go to the <code class="docutils literal notranslate"><span class="pre">values.yaml</span></code> for your rime-agent deployment and set
the following values:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">rimeAgent</span><span class="p">:</span>
  <span class="n">operator</span><span class="p">:</span>
    <span class="n">serviceAccount</span><span class="p">:</span>
      <span class="n">annotations</span><span class="p">:</span>
        <span class="n">eks</span><span class="o">.</span><span class="n">amazonaws</span><span class="o">.</span><span class="n">com</span><span class="o">/</span><span class="n">role</span><span class="o">-</span><span class="n">arn</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">ROLE_ARN</span><span class="o">&gt;</span>
    <span class="n">logArchival</span><span class="p">:</span>
      <span class="n">enabled</span><span class="p">:</span> <span class="n">true</span>
      <span class="n">storageBucketName</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">S3_BUCKET_NAME</span><span class="o">&gt;</span>
      <span class="n">endpoint</span><span class="p">:</span> <span class="s2">&quot;s3.amazonaws.com&quot;</span>
      <span class="nb">type</span><span class="p">:</span> <span class="s2">&quot;s3&quot;</span>
</pre></div>
</div>
</li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">install</span></code> or <code class="docutils literal notranslate"><span class="pre">helm</span> <span class="pre">upgrade</span></code>. You may also need to
manually restart the operator to refresh its AWS credentials.</p></li>
</ol>
<p>Your log archival setup is complete.
See <a class="reference internal" href="../testing_and_monitoring/querying_results/fetching_test_run_logs.html"><span class="doc">Fetching Test Run Logs</span></a>
to learn how to retrieve logs.</p>
<blockquote>
<div></div></blockquote>
</section>
<section id="terraform-installation">
<span id="log-archival-terraform"></span><h3>Terraform Installation<a class="headerlink" href="#terraform-installation" title="Permalink to this heading"></a></h3>
<p>If you manage your Robust Intelligence agent installation via Terraform, follow the instructions below.</p>
<ol class="arabic">
<li><p>Set the following variables on the <code class="docutils literal notranslate"><span class="pre">rime_agent</span></code> module:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">module</span> <span class="s2">&quot;rime_agent_release&quot;</span> <span class="p">{</span>
  <span class="o">...</span>
  <span class="n">log_archival_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="n">enable</span> <span class="o">=</span> <span class="n">true</span>
    <span class="n">bucket_name</span> <span class="o">=</span> <span class="o">&lt;</span><span class="n">S3_BUCKET_NAME</span><span class="o">&gt;</span>
    <span class="n">endpoint</span> <span class="o">=</span> <span class="s2">&quot;s3.amazonaws.com&quot;</span>
    <span class="nb">type</span> <span class="o">=</span> <span class="s2">&quot;s3&quot;</span>
  <span class="p">}</span>
<span class="p">}</span>
</pre></div>
</div>
</li>
<li><p>Run <code class="docutils literal notranslate"><span class="pre">terraform</span> <span class="pre">apply</span></code> to create the configuration described in
the Helm section above. This will also install or upgrade the release.</p></li>
</ol>
<p>Your log archival setup is complete.
See <a class="reference internal" href="../testing_and_monitoring/querying_results/fetching_test_run_logs.html"><span class="doc">Fetching Test Run Logs</span></a>
to learn how to retrieve logs.</p>
</section>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="requirements/data_access_permissions.html" class="btn btn-neutral float-left" title="Data Access Permissions" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="upgrade.html" class="btn btn-neutral float-right" title="Upgrade" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Robust Intelligence.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>