# Stress Tests

A stress test evaluates a machine learning model's resilience with regards to a specific
vulnerability.

## Creating a new Stress Test from the SDK

This procedure presumes a model is already [loaded](../../../python_library/how_to_guides/rime_data_model_setup.md) into RIME and that all commands are issued in a Python environment.

1.  (When a suitable [project](projects.md) does not already exist) Create a project 
    using the following [SDK command](../../../python_library/python-sdk.rst).
    >   ```
    >   project = rime_client.create_project(
    >       name="project", description="desc", model_task='MODEL_TASK_BINARY_CLASSIFICATION'
    >   )
    >   ```
2.  Register a reference dataset.
    >   ```
    >   reference = rime_project.register_dataset(
    >       name="foo",data_config=dict
    >   )
    >   ```

    >   The SDK returns the ID of the reference dataset.
3.  Register an evaluation dataset.
    >   ```
    >   reference = rime_project.register_dataset(
    >       name="bar",data_config=dict
    >   )
    >   ```

    >   The SDK returns the ID of the evaluation dataset.
4.  Register a model.
    >   ```
    >   reference = rime_project.register_model(
    >       name="baz"
    >   )
    >   ```

    >   The SDK returns the model ID.
5.  Create a [test run configuration](../../reference/tabular/tests.md) that uses the 
    registered reference and evaluation datasets and the model, specifying a name and
    model task in addition to the IDs of the datasets and model registered earlier in
    this procedure.
    >   ```
    >   config = {
    >       "data_info": {"ref_dataset_id": "foo", "eval_dataset_id": "bar"},
    >       "model_id": "model_uuid",
    >       "run_name": "My Stress Test Run",
    >   }
    >   ```
6.  Issue the following command to start the Stress Test, specifying the configuration
    created in the previous step and the unique ID of the project that contains the
    Stress Test.
    >   ```
    >   job = client.start_stress_test(
    >       test_run_config=config, project_id="123-445-981"
    >   )
    >   ```

<!-- 
s/training/reference
create project if not already extant (but create project *does* have UI workflow, link to it)
register a training dataset, eval dataset, model
create a testrun config with training/eval/model
- what is possible in a config
- what are legal values for various config params (this should all be in sdk)
sdk command to run_stress_test
-->

<!--
1.  Sign in to an RI Platform instance.  
    >   The Workspaces page appears.
2.  Select a workspace.  
    >   The workspace summary page appears, listing the projects in that workspace.
3.  Select a project.  
    >   The project summary page appears.
4.  From the left navigation bar, click *Stress Testing*.
    >   The Stress Testing page appears.
5.  Click *Create Stress Test*.
    >   The Stress Test wizard appears.
6.  From the *Test Configuration* drop-down, choose a configuration type.
    >   | Type | Description |
    >   |------|-------------|
    >   | From Project Configuration | Uses the project configuration for this stress test. |
    >   | Custom | Enables you to specify a test configuration for this stress test. |
7.  (When using Custom only) Select the types of risks to evaluate in this stress test.
8.  Click *Next*.
9.  Choose a model to test from the list of registered models or register a new model.
10. (When using a registered model) Select the model from the *Select Model* drop-down.
11. (When registering a new model) Choose whether to upload a model file or to add a model from an online registry.
12. (When uploading a new model) Type a name and tags for the model.
13. (When uploading a new model) Drag a `pkl` or `py` model file to the wizard or click *Select File* to browse the file system.
14. (When registering a new model from a registry) Type the name of the registry, the URI or file path to the model in the registry, and the registry secret.
15. Click *Next*.
16. Choose whether to use a registered reference dataset, a dataset from a connection, or a manually uploaded dataset.
17. (Using a registered reference dataset) Type the name of the registered dataset.
18. (Using a reference dataset from a connection) Type a connection name, a table name, a timestamp column, and a label column
19. (Using a reference dataset from a connection) (Optional) Activate the *Predictions (optional) toggle and enter a connection name, table name, optional timestamp column, and prediction column.
20. (Uploading a reference dataset) Drag a dataset file to the wizard or click *Select File* to browse the file system.
    >   RIME accepts datasets in the `csv`, Parquet, `jsonl`, `jsonl.gz`, and `json.gz` formats.
21. (Uploading a reference dataset) (Optional) Activate the *Predictions (optional)* toggle and enter a name, label column name, and optional prediction column name, then drag a predictions file to the wizard or click *Select File* to browse the file system.
    >   RIME accepts datasets in the `csv`, Parquet, `jsonl`, `jsonl.gz`, and `json.gz` formats.
22. Click *Next*.

The wizard closes and the new Stress Test begins initial processing.
-->