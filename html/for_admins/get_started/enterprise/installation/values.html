<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Values &mdash; RIME  documentation</title>
      <link rel="stylesheet" href="../../../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../../../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../../../" id="documentation_options" src="../../../../_static/documentation_options.js"></script>
        <script src="../../../../_static/jquery.js"></script>
        <script src="../../../../_static/underscore.js"></script>
        <script src="../../../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../../../_static/doctools.js"></script>
        <script src="../../../../_static/sphinx_highlight.js"></script>
        <script src="../../../../_static/clipboard.min.js"></script>
        <script src="../../../../_static/copybutton.js"></script>
    <script src="../../../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../../../genindex.html" />
    <link rel="search" title="Search" href="../../../../search.html" />
    <link rel="next" title="Deployment" href="deployment.html" />
    <link rel="prev" title="Dependencies" href="setup.html" />
<link href="../../../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">
<div class="ge_header no-print">
    <a id="header-logo" href="../../../../index.html">
        <img src="../../../../_static/header-logo.png" alt="logo" />
    </a>
</div>


  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../../../index.html" class="icon icon-home">
            RIME
          </a>
              <div class="version">
                0.17.5
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">User Guide</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../../../for_data_scientists/get_started.html">Get Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../for_data_scientists/how_to_guides.html">How-To Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../for_data_scientists/reference.html">Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../../../for_data_scientists/explanation.html">Explanation</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Other Guides</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../../../changelogs.html">Changelogs</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../../index.html">For Administrators</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../../../get_started.html">Get Started</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="../../../get_started.html#rime-cloud">RIME Cloud</a></li>
<li class="toctree-l3 current"><a class="reference internal" href="../../../get_started.html#rime-enterprise">RIME Enterprise</a><ul class="current">
<li class="toctree-l4 current"><a class="reference internal" href="../installation.html">RIME Enterprise VPC Installation</a></li>
<li class="toctree-l4"><a class="reference internal" href="setup.html">Dependencies</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../../../how_to_guides.html">How-To Guides</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../../../local_trial/index.html">RIME Local Trial</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../../../index.html">RIME</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../../../index.html">For Administrators</a></li>
          <li class="breadcrumb-item"><a href="../../../get_started.html">Get Started</a></li>
          <li class="breadcrumb-item"><a href="../installation.html">RIME Enterprise VPC Installation</a></li>
      <li class="breadcrumb-item active">Values</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../../../_sources/for_admins/get_started/enterprise/installation/values.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="values">
<h1>Values<a class="headerlink" href="#values" title="Permalink to this heading"></a></h1>
<p>Before getting started with the actual deployment, please make sure that you have the following information with you:</p>
<section id="docker">
<h2>Docker<a class="headerlink" href="#docker" title="Permalink to this heading"></a></h2>
<p>You will need to have a dockerhub account that has access to Rime repositories. Contact a Rime engineer if you have questions.</p>
<ul class="simple">
<li><p><strong>Dockerhub password:</strong> Password for your dockerhub account with access to Rime repositories. Ask a RIME engineer for access</p></li>
</ul>
</section>
<section id="optional-oauth">
<h2>OPTIONAL: OAuth<a class="headerlink" href="#optional-oauth" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Client ID</p></li>
<li><p>Client Secret</p></li>
<li><p>Issuer URL</p></li>
</ul>
<p>Make sure that you have an Application provisioned in Okta or another identity provider for your Rime App with the following permissions.</p>
<img src="../../../../_static/okta-permissions.png">
<p>Navigate to your OAuth administrator page and find the above values. An example is here:</p>
<img src="../../../../_static/okta-secrets.png">
<p>Lastly, you will need to add <code class="docutils literal notranslate"><span class="pre">https://rime.&lt;domain&gt;/v1/auth/oidc/callback</span></code> as a callback url for your provider. The above configuration was all setup with okta.</p>
<p>An admin can also set up SSO to use an external Identity Provider after cluster installation. More detailed instructions for configuration can be found in the <a class="reference internal" href="../../../how_to_guides/sso.html"><span class="doc std std-doc">SSO Configuration Guide</span></a></p>
<p>Users can login via basic authN service or SSO. Admin operations need to be performed via basic authN login.</p>
</section>
<section id="s3">
<h2>S3<a class="headerlink" href="#s3" title="Permalink to this heading"></a></h2>
<ul class="simple">
<li><p>Bucket name where your data and models will be stored</p></li>
</ul>
</section>
<section id="optional-managed-images">
<h2>OPTIONAL: Managed Images<a class="headerlink" href="#optional-managed-images" title="Permalink to this heading"></a></h2>
<p>To use managed images (i.e. RIME wheel images with additional user-specified PIP
libraries for running RIME tests on your users’ models), you can install the RIME
managed image registry, which uses your
<a class="reference external" href="https://docs.aws.amazon.com/AmazonECR/latest/userguide/what-is-ecr.html">AWS ECR</a> to
store the managed images it creates.</p>
<p><em>Note</em>: as of version 0.13.0, the managed image registry is enabled by default in our
Terraform module.</p>
<p><em>Note</em>: currently this feature is only available with AWS ECR.</p>
<p>In terraform you can configure this feature by adding a setting to your <code class="docutils literal notranslate"><span class="pre">rime</span></code> module of
the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">image_registry_config</span> <span class="o">=</span> <span class="p">{</span>
  <span class="n">enable</span> <span class="o">=</span> <span class="n">true</span>
  <span class="n">repository_prefix</span> <span class="o">=</span> <span class="s2">&quot;rime-managed-images&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>where the <code class="docutils literal notranslate"><span class="pre">repository_prefix</span></code> can be customized to any valid prefix to store the managed
repositories within your ECR. By enabling the managed image registry, you’ll give
permission to RIME’s image registry to create, delete and build images in your ECR, but
<em>only</em> for repositories with the given <code class="docutils literal notranslate"><span class="pre">repository_prefix</span></code>.</p>
<section id="permissions-for-the-managed-image-registry">
<h3>Permissions for the Managed Image Registry<a class="headerlink" href="#permissions-for-the-managed-image-registry" title="Permalink to this heading"></a></h3>
<p>The managed image registry manages new images for you within your ECR so that your
users can have auto-updated rime images with the PIP libraries they require for their
models. To manage image repositories within your ECR, you have to grant the registry
with ECR permissions, which an admin can add automatically by applying our terraform
module.</p>
<p>Enabling the managed image registry gives the following permissions to the server
but restricted <em>only</em> for repositories beginning with <code class="docutils literal notranslate"><span class="pre">repository_prefix</span></code>:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ecr</span><span class="p">:</span><span class="n">CreateRepository</span>
<span class="n">ecr</span><span class="p">:</span><span class="n">DeleteRepository</span>
<span class="n">ecr</span><span class="p">:</span><span class="n">DescribeImages</span>
<span class="n">ecr</span><span class="p">:</span><span class="n">PutLifecyclePolicy</span>
<span class="n">ecr</span><span class="p">:</span><span class="n">ListImages</span>
</pre></div>
</div>
<p>so that the registry server can create and modify repositories with the given
<code class="docutils literal notranslate"><span class="pre">repository_prefix</span></code>.  Additionally, it requires <code class="docutils literal notranslate"><span class="pre">ecr:GetAuthorizationToken</span></code> for all
resources in order to authorize itself.</p>
<p>Also, the managed image registry gives the following permissions to the jobs that build
your new images (<em>only</em> for repositories beginning with <code class="docutils literal notranslate"><span class="pre">repository_prefix</span></code>):</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">ecr</span><span class="p">:</span><span class="n">BatchGetImage</span>
<span class="n">ecr</span><span class="p">:</span><span class="n">BatchCheckLayerAvailability</span>
<span class="n">ecr</span><span class="p">:</span><span class="n">CompleteLayerUpload</span>
<span class="n">ecr</span><span class="p">:</span><span class="n">GetDownloadUrlForLayer</span>
<span class="n">ecr</span><span class="p">:</span><span class="n">InitiateLayerUpload</span>
<span class="n">ecr</span><span class="p">:</span><span class="n">PutImage</span>
<span class="n">ecr</span><span class="p">:</span><span class="n">UploadLayerPart</span>
</pre></div>
</div>
<p>so that those jobs can pull and push new images to the repositories created with prefix
<code class="docutils literal notranslate"><span class="pre">repository_prefix</span></code>. These jobs also require <code class="docutils literal notranslate"><span class="pre">ecr:GetAuthorizationToken</span></code> for all
resources in order to authorize themeselves.</p>
</section>
</section>
<section id="optional-notifications">
<h2>OPTIONAL: Notifications<a class="headerlink" href="#optional-notifications" title="Permalink to this heading"></a></h2>
<p>If you want to be notified about certain events e.g. a test run finishing, you will need to have the following information.</p>
<section id="email">
<h3>Email<a class="headerlink" href="#email" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>SMTP Email</p></li>
<li><p>SMTP Email Password</p></li>
<li><p>SMTP Server Url</p></li>
<li><p>SMTP Port</p></li>
<li><p>Receiver Emails (comma separated list of emails subscribed to notifications)</p></li>
</ul>
</section>
<section id="admin-user">
<h3>Admin User<a class="headerlink" href="#admin-user" title="Permalink to this heading"></a></h3>
<ul class="simple">
<li><p>Admin Email</p></li>
<li><p>Admin Password</p></li>
</ul>
<p>Initial Username and Password for the first admin user to login. They will need to reset the password on login.</p>
</section>
</section>
<section id="secrets-manager">
<h2>Secrets Manager<a class="headerlink" href="#secrets-manager" title="Permalink to this heading"></a></h2>
<p>You will need to generate a file called secrets.json with the following structure based off the values you procured above:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
<span class="s2">&quot;admin_username&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">admin</span> <span class="n">email</span><span class="o">&gt;</span><span class="p">,</span>
<span class="s2">&quot;admin_password&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">admin</span> <span class="n">password</span><span class="o">&gt;</span><span class="p">,</span>
<span class="s2">&quot;datadog-api-key&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;provided datadog-api-key&gt;&quot;</span><span class="p">,</span>
<span class="s2">&quot;docker-logins&quot;</span><span class="p">:</span> <span class="p">[</span>
   <span class="p">{</span>
     <span class="s2">&quot;docker-server&quot;</span><span class="p">:</span> <span class="s2">&quot;https://index.docker.io/v2/&quot;</span><span class="p">,</span>
     <span class="s2">&quot;docker-username&quot;</span><span class="p">:</span> <span class="s2">&quot;robusthub&quot;</span><span class="p">,</span>
     <span class="s2">&quot;docker-password&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;token given&gt;&quot;</span><span class="p">,</span>
     <span class="s2">&quot;docker-email&quot;</span><span class="p">:</span> <span class="s2">&quot;dev@robustintelligence.com&quot;</span>
   <span class="p">}</span>
 <span class="p">],</span>
  <span class="s2">&quot;oauth_client_id&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;Client ID from Okta app&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;oauth_client_secret&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;Client Secret from Okta app&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;oauth_well_known_url&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">issuer</span> <span class="n">url</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">&quot;rime_jwt&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;jwt given&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;rime-user&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;provided user ID for support&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;smtp_email&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">smtp</span> <span class="n">email</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">&quot;smtp_password&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">smtp</span> <span class="n">password</span><span class="o">&gt;</span><span class="p">,</span>
  <span class="s2">&quot;smtp_server&quot;</span><span class="p">:</span> <span class="s2">&quot;smtp server&gt;&quot;</span><span class="p">,</span>
  <span class="s2">&quot;smtp_port&quot;</span><span class="p">:</span> <span class="s2">&quot;&lt;smtp port&gt;&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<p>You will then need to create a secret in aws called <code class="docutils literal notranslate"><span class="pre">rime-secrets</span></code> with the above value. You can do this with the following command <code class="docutils literal notranslate"><span class="pre">aws</span> <span class="pre">secretsmanager</span> <span class="pre">create-secret</span> <span class="pre">--name</span> <span class="pre">rime-secrets</span> <span class="pre">--description</span> <span class="pre">&quot;Secrets</span> <span class="pre">for</span> <span class="pre">rime</span> <span class="pre">service&quot;</span> <span class="pre">--secret-string</span> <span class="pre">file://&lt;path-to&gt;/secrets.json</span></code>.</p>
</section>
<section id="vpc">
<h2>VPC<a class="headerlink" href="#vpc" title="Permalink to this heading"></a></h2>
<p>Rime expects you to have a valid vpc provisioned in the region that you want to deploy the Rime cluster onto. You will be expected to pass in
subnets and the vpc id of your vpc as part of terraform setup.</p>
</section>
<section id="dns">
<h2>DNS<a class="headerlink" href="#dns" title="Permalink to this heading"></a></h2>
<p>Rime also expects you to have a valid route53 domain(eg. latest.dev) and acm certificate for your domain with wildcard access on subdomains(so that RIME can provision dns records). This domain will be passed in as part of terraform setup. If you do not have the ability to set up DNS, your cluster must be setup on private subnets to ensure security without TLS.</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="setup.html" class="btn btn-neutral float-left" title="Dependencies" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="deployment.html" class="btn btn-neutral float-right" title="Deployment" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Robust Intelligence.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>