<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Running AI Firewall on the Fraud Example with the RIME SDK &mdash; RIME  documentation</title>
      <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="../../_static/copybutton.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="../../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
        <script src="../../_static/jquery.js"></script>
        <script src="../../_static/underscore.js"></script>
        <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../../_static/doctools.js"></script>
        <script src="../../_static/sphinx_highlight.js"></script>
        <script src="../../_static/clipboard.min.js"></script>
        <script src="../../_static/copybutton.js"></script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="Create and Manage Projects" href="projects.html" />
    <link rel="prev" title="Running AI Stress Testing on the Fraud Example with RIME SDK" href="rime_ai_stress_testing_with_sdk.html" />
<link href="../../_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav">
<div class="ge_header no-print">
    <a id="header-logo" href="../../index.html">
        <img src="../../_static/header-logo.png" alt="logo" />
    </a>
</div>


  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../index.html" class="icon icon-home">
            RIME
          </a>
              <div class="version">
                0.16.14
              </div>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">RIME</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../rime/product-overview.html">Product Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../rime/product-details.html">Product Details</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Get Started</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/installation.html">Installation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../get_started/quickstart.html">Running Your First AI Stress Test</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Walkthroughs</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../python-sdk.html">Python SDK</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../python-sdk.html#running-rime">Running RIME</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="rime_ai_stress_testing_with_sdk.html">Running AI Stress Testing on the Fraud Example with RIME SDK</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Running AI Firewall on the Fraud Example with the RIME SDK</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#setup">Setup</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-ai-firewall-on-the-fraud-example">Running AI Firewall on the Fraud Example</a></li>
<li class="toctree-l4"><a class="reference internal" href="#running-ai-firewall-on-an-incremental-batch-of-data">Running AI Firewall on an Incremental Batch of Data</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="projects.html">Create and Manage Projects</a></li>
<li class="toctree-l3"><a class="reference internal" href="querying_results.html">Querying RIME Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="run_ai_stress_testing.html">Run AI Stress Testing on Your Own Model and Datasets</a></li>
<li class="toctree-l3"><a class="reference internal" href="multiple_model_files.html">Run AI Stress Testing on Models with Multiple Files</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="../python-sdk.html#customizations">Customizations</a></li>
<li class="toctree-l2"><a class="reference internal" href="../python-sdk.html#utilities">Utilities</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../python-library.html">Python Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../cli.html">CLI</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Configuring RIME</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/tabular.html">Tabular Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/nlp.html">NLP Configuration</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../configuration/cv.html">CV Configuration</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">API Reference</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../reference/api-authentication.html">API Authentication</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/python-sdk.html">Python SDK</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/python-library.html">Python Library</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/cli.html">CLI</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/integrations.html">Integrations</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../reference/troubleshooting.html">Troubleshooting</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">RIME</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="../python-sdk.html">Python SDK</a></li>
      <li class="breadcrumb-item active">Running AI Firewall on the Fraud Example with the RIME SDK</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../../_sources/walkthroughs/python-sdk/rime_firewall_with_sdk.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="running-ai-firewall-on-the-fraud-example-with-the-rime-sdk">
<h1>Running AI Firewall on the Fraud Example with the RIME SDK<a class="headerlink" href="#running-ai-firewall-on-the-fraud-example-with-the-rime-sdk" title="Permalink to this heading"></a></h1>
<p>This tutorial will guide you through how to get started with the RIME SDK by
running AI Firewall on a model trained over a slightly modified version
of the <a target="_blank" rel="noopener"
href="https://www.kaggle.com/c/ieee-fraud-detection">IEEE-CIS Fraud
Detection</a> dataset.</p>
<p>Before you begin, make sure:</p>
<ul class="simple">
<li><p>You have completed the installation</p></li>
<li><p>You are in the Python environment with the RIME Python SDK installed</p></li>
<li><p>You have <a class="reference external" href="https://www.dropbox.com/s/bv0epg6fbkts62j/ri-public-examples.tar.gz?dl=0">downloaded</a> the example datasets and configuration files</p></li>
</ul>
<section id="setup">
<h2>Setup<a class="headerlink" href="#setup" title="Permalink to this heading"></a></h2>
<p>The RIME SDK reads data and model from AWS S3. To begin using the RIME
SDK, please first upload the <code class="docutils literal notranslate"><span class="pre">fraud_continuous_testing</span></code> folder (found inside zip file downloaded
above) to an S3 bucket that you have access to.</p>
</section>
<section id="running-ai-firewall-on-the-fraud-example">
<h2>Running AI Firewall on the Fraud Example<a class="headerlink" href="#running-ai-firewall-on-the-fraud-example" title="Permalink to this heading"></a></h2>
<p>For the basic example, we will run AI Firewall with a model. If you do
not want to run RIME with the model, and instead want to run in a different
mode (e.g. using prediction logs instead), see the end of this document for
different workflows. The model provided in the examples folder is a Catboost
model and we will need to install extra dependencies (in order to call that
model). To do this, please run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>pip<span class="w"> </span>install<span class="w"> </span>-r<span class="w"> </span>workshop_requirements.txt
</pre></div>
</div>
<p>To begin, initialize the <code class="docutils literal notranslate"><span class="pre">RIMEClient</span></code> and point it to the location of your RIME backend.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">rime_sdk</span> <span class="kn">import</span> <span class="n">RIMEClient</span>

<span class="n">rime_client</span> <span class="o">=</span> <span class="n">RIMEClient</span><span class="p">(</span><span class="s2">&quot;rime-backend.&lt;YOUR_ORG_NAME&gt;.rime.dev&quot;</span><span class="p">,</span> <span class="s2">&quot;&lt;YOUR_API_TOKEN&gt;&quot;</span><span class="p">)</span>
</pre></div>
</div>
<p>Next, start python and run the following:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">json</span>

<span class="n">project</span> <span class="o">=</span> <span class="n">rime_client</span><span class="o">.</span><span class="n">create_project</span><span class="p">(</span><span class="s2">&quot;FooBar&#39;s Test Project&quot;</span><span class="p">,</span> <span class="s2">&quot;DESCRIPTION&quot;</span><span class="p">)</span>

<span class="c1"># Load the configuration file</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;examples/fraud_continuous_testing/trial_config.json&quot;</span><span class="p">)</span>
<span class="n">config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>

<span class="n">config</span><span class="p">[</span><span class="s2">&quot;data_info&quot;</span><span class="p">][</span><span class="s2">&quot;ref_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;s3://path/to/examples/fraud_continuous_testing/ref.csv&quot;</span>
<span class="n">config</span><span class="p">[</span><span class="s2">&quot;data_info&quot;</span><span class="p">][</span><span class="s2">&quot;eval_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;s3://path/to/examples/fraud_continuous_testing/eval_2021_04_01_to_2021_05_01.csv&quot;</span>

<span class="c1"># Start the tests</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">rime_client</span><span class="o">.</span><span class="n">start_firewall_from_reference</span><span class="p">(</span><span class="n">test_run_config</span><span class="o">=</span><span class="n">config</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="n">project</span><span class="o">.</span><span class="n">project_id</span><span class="p">)</span>
<span class="n">job</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">poll_rate_sec</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">wait_until_finish</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<p>This will start running the tests and wait for them to finish. Once they
finish, you will be able to see the results through the RIME interface on your
web browser.</p>
</section>
<section id="running-ai-firewall-on-an-incremental-batch-of-data">
<h2>Running AI Firewall on an Incremental Batch of Data<a class="headerlink" href="#running-ai-firewall-on-an-incremental-batch-of-data" title="Permalink to this heading"></a></h2>
<p>Similar to the above steps, but instead the command you will want to run is:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="c1"># Load the configuration file</span>
<span class="n">f</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s2">&quot;examples/fraud_continuous_testing/stress_testing_config.json&quot;</span><span class="p">)</span>
<span class="n">ot_config</span> <span class="o">=</span> <span class="n">json</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">f</span><span class="p">)</span>
<span class="n">ot_config</span><span class="p">[</span><span class="s2">&quot;data_info&quot;</span><span class="p">][</span><span class="s2">&quot;ref_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;s3://path/to/examples/fraud_continuous_testing/ref.csv&quot;</span>
<span class="n">ot_config</span><span class="p">[</span><span class="s2">&quot;data_info&quot;</span><span class="p">][</span><span class="s2">&quot;eval_path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="s2">&quot;s3://path/to/examples/fraud_continuous_testing/eval_2021_04_01_to_2021_04_29.csv&quot;</span>

<span class="c1"># Start the stress test</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">rime_client</span><span class="o">.</span><span class="n">start_stress_test</span><span class="p">(</span><span class="n">test_run_config</span><span class="o">=</span><span class="n">ot_config</span><span class="p">,</span> <span class="n">project_id</span><span class="o">=</span><span class="n">project</span><span class="o">.</span><span class="n">project_id</span><span class="p">)</span>
<span class="n">job</span><span class="o">.</span><span class="n">get_status</span><span class="p">(</span><span class="n">poll_rate_sec</span><span class="o">=</span><span class="mf">1.0</span><span class="p">,</span> <span class="n">verbose</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">wait_until_finish</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">ot_test_run_id</span> <span class="o">=</span> <span class="n">job</span><span class="o">.</span><span class="n">get_test_run_result</span><span class="p">()[</span><span class="s1">&#39;metadata.id&#39;</span><span class="p">][</span><span class="mi">0</span><span class="p">]</span>

<span class="c1"># Create Firewall</span>
<span class="n">firewall</span> <span class="o">=</span> <span class="n">rime_client</span><span class="o">.</span><span class="n">create_firewall</span><span class="p">(</span><span class="s2">&quot;fw sdk test&quot;</span><span class="p">,</span> <span class="mi">86400</span><span class="p">,</span> <span class="n">ot_test_run_id</span><span class="p">,</span> <span class="n">project</span><span class="o">.</span><span class="n">project_id</span><span class="p">)</span>

<span class="c1"># Run Firewall on an Incremental Batch of Data</span>
<span class="n">incremental_config</span> <span class="o">=</span> <span class="p">{</span>
    <span class="s2">&quot;eval_path&quot;</span><span class="p">:</span> <span class="s2">&quot;s3://path/to/examples/fraud_continuous_testing/eval_2021_04_30_to_2021_05_01.csv&quot;</span><span class="p">,</span>
    <span class="s2">&quot;timestamp_col&quot;</span><span class="p">:</span> <span class="s2">&quot;timestamp&quot;</span>
<span class="p">}</span>
<span class="n">job</span> <span class="o">=</span> <span class="n">firewall</span><span class="o">.</span><span class="n">run_firewall_incremental_data</span><span class="p">(</span><span class="n">incremental_config</span><span class="p">)</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="rime_ai_stress_testing_with_sdk.html" class="btn btn-neutral float-left" title="Running AI Stress Testing on the Fraud Example with RIME SDK" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="projects.html" class="btn btn-neutral float-right" title="Create and Manage Projects" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Robust Intelligence.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>